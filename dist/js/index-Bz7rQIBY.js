!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e=!1,t={x:1024,y:768},i={create:function(){this.game.sound.mute=e,this.game.state.start("preloader")}},a={preload:function(){this.load.image("ground","src/images/ground.png"),this.load.image("ground2","src/images/grasstile_dark.png"),this.game.load.image("starfield","src/images/starfield.png"),this.game.load.image("seat","src/images/Seat_Large_1.png"),this.game.load.image("box1","src/images/GUI_Box_1.png"),this.game.load.image("chatBox","src/images/splash/Chat_phone_1.png"),this.game.load.image("rock1","src/images/Rock_Large_1.png"),this.game.load.image("rock2","src/images/Rock_Large_2.png"),this.game.load.image("lamp","src/images/Lamp_Large_1.png"),this.game.load.image("tree","src/images/tree-blackout.png"),this.game.load.image("shop1","src/images/shoptrio1.png"),this.game.load.image("shop2","src/images/shoptrio1-desaturated.png"),this.game.load.image("drinkSmall","src/images/Drink_Small_1.png"),this.game.load.image("smallSake","src/images/Sake_Small_1.png"),this.game.load.image("largeSake","src/images/Sake_Large_1.png"),this.game.load.image("cloud1","src/images/cloud1.png"),this.game.load.image("cloud2","src/images/cloud2.png"),this.game.load.image("cloud3","src/images/cloud3.png"),this.game.load.audio("music","src/audio/test.mp3"),this.game.load.image("tanuki2","src/images/tanukifly2.png"),this.load.spritesheet("ship","src/images/tanukisprite_115_100.png",115,100,2),this.game.load.audio("ringing","src/audio/ringing.mp3"),this.game.load.image("splash-1","src/images/splash/splash-main.png"),this.game.load.image("shop","src/images/splash/all-shops.png"),this.game.load.image("splash-text","src/images/splash/go-home-tanuki-text.png"),this.game.load.image("splash-phone","src/images/splash/phone.png"),this.game.load.image("youdrunk","src/images/splash/youredrunk.png"),this.game.load.image("splash-message-box","src/images/splash/phone-message.png"),this.game.load.image("plaque","src/images/load/load-list.png"),this.game.load.image("checkmark","src/images/load/checkmark.png"),this.game.load.image("underline","src/images/load/underline.png")},create:function(){this.game.state.start("load")}},s=function(){};s.prototype.preload=function(){},s.prototype.create=function(){this.add.image(200,50,"plaque")},s.prototype.update=function(){this.time.events.add(.5*Phaser.Timer.SECOND,this.checkmarkFunc,this),this.time.events.add(1*Phaser.Timer.SECOND,this.checkmarkFunc2,this),this.time.events.add(1.5*Phaser.Timer.SECOND,this.underlineFunc,this),this.time.events.add(2.5*Phaser.Timer.SECOND,this.loadSplash,this)},s.prototype.checkmarkFunc=function(){this.add.image(350,260,"checkmark")},s.prototype.checkmarkFunc2=function(){this.add.image(350,360,"checkmark")},s.prototype.underlineFunc=function(){this.add.image(350,525,"underline")},s.prototype.loadSplash=function(){this.game.state.start("splash")};const o=function(){};let n,l,r,d,c,h,g,m,u,p,y,f,b;const v={font:"bold 32px monospace",fill:"#fff",boundsAlignH:"center",boundsAlignV:"middle"};o.prototype.preload=function(){},o.prototype.create=function(){this.sound=this.sound.play("ringing"),this.starfield=this.add.tileSprite(0,0,1024,768,"starfield"),this.ground=this.add.tileSprite(0,656,1024,112,"ground"),l=this.add.sprite(-100,0,"shop"),g=this.add.image(0,0,"splash-1"),n=this.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),r=this.add.text(350,650,"Click to start",v),this.time.events.add(2*Phaser.Timer.SECOND,this.addPhone,this),this.time.events.add(3*Phaser.Timer.SECOND,this.addMessage,this),this.time.events.add(4*Phaser.Timer.SECOND,this.addTitle,this),this.time.events.add(4.5*Phaser.Timer.SECOND,this.addYouDrunk,this),u=this.add.tween(r),p=this.add.tween(d),y=this.add.tween(c),f=this.add.tween(h),b=this.add.tween(g)},o.prototype.update=function(){const e=this;if(n.isDown||this.input.activePointer.isDown){m=this.add.tween(l);try{u.to({x:-1440},1e3,"Linear",!0),p.to({x:-1440},1e3,"Linear",!0),y.to({x:-1440},1e3,"Linear",!0),f.to({x:-1440},1e3,"Linear",!0),b.to({x:-1440},1e3,"Linear",!0),m.to({x:-1440},1e3,"Linear",!0).onComplete.add(function(){e.game.state.start("game")})}catch(t){e.game.state.start("game")}}},o.prototype.addPhone=function(){d=this.add.image(325,400,"splash-phone")},o.prototype.addMessage=function(){c=this.add.image(25,260,"splash-message-box"),c.animations.add("shake"),c.animations.play("shake",30,!0),this.add.tween(c).to({x:50},150,Phaser.Easing.Quadratic.InOut,!0,0,1e3,!0)},o.prototype.addTitle=function(){h=this.add.image(175,0,"splash-text")},o.prototype.addYouDrunk=function(){this.add.image(300,230,"youdrunk")};const k={};let x,A,B,P,S,E,w,O,D,_,M,R,C,F,K,I,L,T,W,N,G,q=!1,H=5,U=0,Y="Drunkness x Time",j=-200,Q=1.5,V=-425,z=3e3,J=3e3;function X(){A.body.velocity.y=-500,k.add.tween(A).to({angle:-40},100).start()}function Z(){!1!==A.alive&&(A.alive=!1,k.time.events.remove(this.timer),M.forEachAlive(function(e){e.body.velocity.x=0},this),x.tilePosition.x=0,P.tilePosition.x=0,J=z,H=10,L.destroy())}function $(){var e=M.getFirstExists(!1);e.reset(1023,467),e.body.velocity.x=j/2,e.body.immovable=!0}function ee(){var e=I.getFirstExists(!1);e.reset(1023,k.rnd.integerInRange(50,500)),e.body.velocity.x=-200,e.body.immovable=!0}function te(){var e=K.getFirstExists(!1);e.reset(1023,k.rnd.integerInRange(50,500)),e.body.velocity.x=-200,e.body.immovable=!0}function ie(){var e=D.getFirstExists(!1);e.reset(1023,630),e.body.velocity.x=j,e.body.immovable=!0}function ae(){var e=_.getFirstExists(!1);e.reset(1023,630),e.body.velocity.x=j,e.body.immovable=!0}function se(){var e=R.getFirstExists(!1);e.reset(1023,376),e.body.velocity.x=j/2,e.body.immovable=!0}function oe(){var e=F.getFirstExists(!1);e.reset(1023,426),e.body.velocity.x=j/2,e.body.immovable=!0}function ne(){var e=C.getFirstExists(!1);e.reset(1023,156),e.body.velocity.x=j,e.body.immovable=!0}function le(){var e=E.getFirstExists(!1);e.reset(1023,k.rnd.integerInRange(0,475)),e.body.velocity.x=V,e.body.immovable=!0}function re(){var e=w.getFirstExists(!1);e.reset(1023,k.rnd.integerInRange(0,475)),e.body.velocity.x=V,e.body.immovable=!0}function de(){var e=O.getFirstExists(!1);e.reset(1023,k.rnd.integerInRange(0,500)),e.body.velocity.x=V,e.body.immovable=!0}function ce(e,t){t.kill(),ge(1)}function he(e,t){t.kill(),ge(3)}function ge(e){H>10||(H+=e,J+=100*e,A.body.gravity.y=J,drunkMeter.text=H)}function me(){0===H&&(H=0),H>0&&(H--,J-=100,A.body.gravity.y=J,drunkMeter.text=H)}k.create=function(){k.time.reset(),L=k.add.audio("music"),L.play(),x=this.starfield=k.add.tileSprite(0,0,1024,768,"starfield"),R=k.add.group(),R.enableBody=!0,R.createMultiple(25,"tree"),R.setAll("outOfBoundsKill",!0),R.setAll("checkWorldBounds",!0),M=k.add.group(),M.enableBody=!0,M.createMultiple(25,"lamp"),M.setAll("outOfBoundsKill",!0),M.setAll("checkWorldBounds",!0),F=k.add.group(),F.enableBody=!0,F.createMultiple(25,"shop2"),F.setAll("outOfBoundsKill",!0),F.setAll("checkWorldBounds",!0),C=k.add.group(),C.enableBody=!0,C.createMultiple(25,"shop1"),C.setAll("outOfBoundsKill",!0),C.setAll("checkWorldBounds",!0),E=k.add.group(),E.enableBody=!0,E.createMultiple(25,"cloud1"),E.setAll("outOfBoundsKill",!0),E.setAll("checkWorldBounds",!0),w=k.add.group(),w.enableBody=!0,w.createMultiple(25,"cloud2"),w.setAll("outOfBoundsKill",!0),w.setAll("checkWorldBounds",!0),O=k.add.group(),O.enableBody=!0,O.createMultiple(25,"cloud3"),O.setAll("outOfBoundsKill",!0),O.setAll("checkWorldBounds",!0),A=this.player=this.game.add.sprite(200,300,"ship"),A.animations.add("fly"),A.animations.play("fly",2,!0),k.physics.enable(A,Phaser.Physics.ARCADE),A.anchor.setTo(.5,.5),A.body.gravity.y=J,k.input.keyboard.createCursorKeys(),B=k.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),k.input.onDown.add(X,A),I=k.add.group(),I.enableBody=!0,I.createMultiple(100,"smallSake"),I.setAll("outOfBoundsKill",!0),I.setAll("checkWorldBounds",!0),K=k.add.group(),K.enableBody=!0,K.createMultiple(100,"largeSake"),K.setAll("outOfBoundsKill",!0),K.setAll("checkWorldBounds",!0),D=k.add.group(),D.enableBody=!0,D.createMultiple(25,"rock1"),D.setAll("outOfBoundsKill",!0),D.setAll("checkWorldBounds",!0),_=k.add.group(),_.enableBody=!0,_.createMultiple(25,"rock2"),_.setAll("outOfBoundsKill",!0),_.setAll("checkWorldBounds",!0),k.add.text(250,20,"High Score: ",{font:"30px Arial",fill:"white"}),k.add.text(415,20,Y,{font:"30px Arial",fill:"white"}),k.add.text(20,20,"Drunkness: ",{font:"30px Arial",fill:"white"}),drunkMeter=k.add.text(180,20,H,{font:"30px Arial",fill:"white"}),k.add.text(20,60,"Time: ",{font:"30px Arial",fill:"white"}),time=k.add.text(110,60,"0",{font:"30px Arial",fill:"white"}),this.timer=k.time.events.loop(3e3,me,null,this),P=this.ground=k.add.tileSprite(0,656,1024,115,"ground"),P.physicsType=Phaser.SPRITE,k.physics.enable(P,Phaser.Physics.ARCADE),S=this.ground2=k.add.tileSprite(0,623,1024,150,"ground2"),k.physics.enable(S,Phaser.Physics.ARCADE),this.timer=k.time.events.loop(3500,function(){T[k.rnd.integerInRange(0,2)]()},null,this),this.timer=k.time.events.loop(5e3,function(){W[k.rnd.integerInRange(0,4)]()},null,this),this.timer=k.time.events.loop(k.rnd.integerInRange(3e3,7e3),function(){N[k.rnd.integerInRange(0,3)]()},null,this),this.timer=k.time.events.loop(k.rnd.integerInRange(1e3,17e3),se,null,this),this.timer=k.time.events.loop(2e3,function(){G[k.rnd.integerInRange(0,3)]()},null,this)},k.update=function(){H>=10&&(q=!0),!1===A.alive&&((parseInt(Y)<H*U||"number"!=typeof Y)&&(Y=H*U),q=!1,H=5,k.time.reset(),k.state.start("game")),!0===q&&(Q=10,j=-2e3,V=-850,J=5e3),!1===q&&(Q=1.5,j=-200,V=-550,z=3e3),k.physics.arcade.collide(A,P),P.tilePosition.x-=2,k.physics.arcade.enableBody(P),P.body.allowGravity=!1,P.body.checkCollision=!0,P.body.allowGravity=!1,P.body.immovable=!0,P.body.moves=!1,S.tilePosition.x-=2,k.physics.arcade.enableBody(S),S.body.allowGravity=!1,S.body.allowGravity=!1,S.body.moves=!1,x.tilePosition.x-=Q,A.body.collideWorldBounds=!0,A.angle<90&&(A.angle+=2.5),(B.isDown||k.input.activePointer.isDown)&&X(),A.body.y>500&&(A.angle+=.9),k.physics.arcade.overlap(A,E,Z,null,this),k.physics.arcade.overlap(A,w,Z,null,this),k.physics.arcade.overlap(A,O,Z,null,this),k.physics.arcade.overlap(A,D,Z,null,this),k.physics.arcade.overlap(A,_,Z,null,this),k.physics.arcade.overlap(A,I,ce,null,this),k.physics.arcade.overlap(A,K,he,null,this),time.text=Math.floor(this.game.time.totalElapsedSeconds()),U=Math.floor(this.game.time.totalElapsedSeconds())},T=[le,re,de],W=[le,re,de,ie,ae],N=[$,se,ne,oe],G=[te,ee,ee,ee];const ue=new Phaser.Game(t.x,t.y,Phaser.AUTO,"game"),pe={boot:i,preloader:a,load:s,splash:o,game:k};Object.entries(pe).forEach(([e,t])=>{ue.state.add(e,t)}),ue.state.start("boot");
