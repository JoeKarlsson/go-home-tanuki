import{g as e}from"./game-B2KHMwon.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t=!1,s={x:1024,y:768},a={create:function(){this.game.sound.mute=t;const e=document.querySelector(".loading-spinner");e&&(e.style.display="none"),this.game.state.start("preloader")}},i={preload:function(){this.load.image("ground","src/images/ground.png"),this.load.spritesheet("ship","src/images/tanukisprite_115_100.png",115,100,2),this.load.spritesheet("tanukiRoll","src/images/tanukisprite_115_100.png",115,100,2),this.game.load.image("cloud1","src/images/cloud1.png"),this.game.load.image("cloud2","src/images/cloud2.png"),this.game.load.image("cloud3","src/images/cloud3.png"),this.game.load.image("plaque","src/images/load/load-list.png"),this.game.load.image("checkmark","src/images/load/checkmark.png"),this.game.load.image("underline","src/images/load/underline.png"),this.game.load.start()},create:function(){this.game.state.start("load")}},o=function(){};let r,n,d=!1;o.prototype.preload=function(){this.game.load.image("splash-1","src/images/splash/splash-main.png"),this.game.load.image("shop","src/images/splash/all-shops.png"),this.game.load.image("splash-text","src/images/splash/go-home-tanuki-text.png"),this.game.load.image("splash-phone","src/images/splash/phone.png"),this.game.load.image("youdrunk","src/images/splash/youredrunk.png"),this.game.load.image("splash-message-box","src/images/splash/phone-message.png"),this.game.load.start()},o.prototype.create=function(){r=this.add.image(512,384,"plaque"),r.anchor.set(.5),this.createLoadingUI(),this.checkLoadingProgress()},o.prototype.createLoadingUI=function(){this.loadingTips=["Tip: Collect sake to increase your drunkness!","Tip: Avoid obstacles like clouds and rocks!","Tip: The more drunk you are, the harder it gets!","Tip: Try to stay alive as long as possible!","Tip: Click to flap your wings!"],this.progressBarBg=this.add.graphics(),this.progressBarBg.lineStyle(4,16777215,1),this.progressBarBg.drawRect(312,700,400,20),this.progressBar=this.add.graphics(),n=this.add.text(512,660,"Loading splash assets...",{font:"bold 20px monospace",fill:"#ffffff",align:"center",stroke:"#000033",strokeThickness:3}),n.anchor.set(.5),this.tipText=this.add.text(512,750,this.loadingTips[0],{font:"16px monospace",fill:"#ffff00",align:"center",stroke:"#000033",strokeThickness:2}),this.tipText.anchor.set(.5),this.loadingDots=this.add.text(512,780,"...",{font:"bold 28px monospace",fill:"#00ff00",align:"center",stroke:"#000033",strokeThickness:2}),this.loadingDots.anchor.set(.5),this.add.tween(this.loadingDots).to({alpha:.3},500,Phaser.Easing.Linear.None,!0,0,-1,!0),this.tipRotationTimer=this.time.events.loop(2e3,this.rotateTip,this)},o.prototype.checkLoadingProgress=function(){const e=["splash-1","shop","splash-text","splash-phone","youdrunk","splash-message-box"],t=e.filter(e=>this.game.cache.checkImageKey(e)).length,s=e.length,a=Math.round(t/s*100);n.text=`Loading splash assets... ${a}%`,this.updateProgressBar(a),t!==s||d?t<s&&this.time.events.add(.1*Phaser.Timer.SECOND,this.checkLoadingProgress,this):(d=!0,n.text="Loading complete!",this.updateProgressBar(100),this.time.events.remove(this.tipRotationTimer),this.time.events.add(.5*Phaser.Timer.SECOND,this.checkmarkFunc,this),this.time.events.add(1*Phaser.Timer.SECOND,this.checkmarkFunc2,this),this.time.events.add(1.5*Phaser.Timer.SECOND,this.underlineFunc,this),this.time.events.add(2*Phaser.Timer.SECOND,this.loadSplash,this))},o.prototype.updateProgressBar=function(e){this.progressBar.clear(),this.progressBar.beginFill(16711680,1),this.progressBar.drawRect(314,702,396*e/100,16),this.progressBar.endFill()},o.prototype.rotateTip=function(){const e=(this.loadingTips.indexOf(this.tipText.text)+1)%this.loadingTips.length;this.add.tween(this.tipText).to({alpha:0},200,Phaser.Easing.Linear.None,!0).onComplete.add(()=>{this.tipText.text=this.loadingTips[e],this.add.tween(this.tipText).to({alpha:1},200,Phaser.Easing.Linear.None,!0)})},o.prototype.update=function(){this.gameplayAssetsStarted||(this.gameplayAssetsStarted=!0,this.preloadGameplayAssets())},o.prototype.preloadGameplayAssets=function(){this.game.load.image("ground2","src/images/grasstile_dark.png"),this.game.load.image("starfield","src/images/starfield.png"),this.game.load.image("seat","src/images/Seat_Large_1.png"),this.game.load.image("box1","src/images/GUI_Box_1.png"),this.game.load.image("chatBox","src/images/splash/Chat_phone_1.png"),this.game.load.image("rock1","src/images/Rock_Large_1.png"),this.game.load.image("rock2","src/images/Rock_Large_2.png"),this.game.load.image("lamp","src/images/Lamp_Large_1.png"),this.game.load.image("tree","src/images/tree-blackout.png"),this.game.load.image("shop1","src/images/shoptrio1.png"),this.game.load.image("shop2","src/images/shoptrio1-desaturated.png"),this.game.load.image("drinkSmall","src/images/Drink_Small_1.png"),this.game.load.image("smallSake","src/images/Sake_Small_1.png"),this.game.load.image("largeSake","src/images/Sake_Large_1.png"),this.game.load.image("tanuki2","src/images/tanukifly2.png"),this.game.load.start()},o.prototype.checkmarkFunc=function(){this.add.image(350,260,"checkmark")},o.prototype.checkmarkFunc2=function(){this.add.image(350,360,"checkmark")},o.prototype.underlineFunc=function(){this.add.image(350,525,"underline")},o.prototype.loadSplash=function(){this.game.state.start("splash")};const h=function(){};let g,l,p,m,c,u,f,k,y,x,T,P,L;const S={font:"bold 32px monospace",fill:"#fff",boundsAlignH:"center",boundsAlignV:"middle"};h.prototype.preload=function(){},h.prototype.create=function(){this.loadAudioAfterInteraction(),this.game.cache.checkImageKey("starfield")?this.starfield=this.add.tileSprite(0,0,1024,768,"starfield"):(this.starfield=this.add.graphics(),this.starfield.beginFill(51),this.starfield.drawRect(0,0,1024,768),this.starfield.endFill()),this.ground=this.add.tileSprite(0,656,1024,112,"ground"),l=this.add.sprite(-100,0,"shop"),f=this.add.image(0,0,"splash-1"),g=this.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),p=this.add.text(350,650,"Click to start",S),this.time.events.add(2*Phaser.Timer.SECOND,this.addPhone,this),this.time.events.add(3*Phaser.Timer.SECOND,this.addMessage,this),this.time.events.add(4*Phaser.Timer.SECOND,this.addTitle,this),this.time.events.add(4.5*Phaser.Timer.SECOND,this.addYouDrunk,this),y=this.add.tween(p),x=this.add.tween(m),T=this.add.tween(c),P=this.add.tween(u),L=this.add.tween(f)},h.prototype.loadAudioAfterInteraction=function(){this.game.load.audio("ringing","src/audio/ringing.mp3"),this.game.load.audio("music","src/audio/test.mp3"),this.game.load.onLoadComplete.add(()=>{this.game.cache.checkSoundKey("ringing")&&(this.sound=this.sound.play("ringing"))},this),this.game.load.start()},h.prototype.update=function(){const e=this;if(g.isDown||this.input.activePointer.isDown){k=this.add.tween(l);try{y.to({x:-1440},1e3,"Linear",!0),x.to({x:-1440},1e3,"Linear",!0),T.to({x:-1440},1e3,"Linear",!0),P.to({x:-1440},1e3,"Linear",!0),L.to({x:-1440},1e3,"Linear",!0),k.to({x:-1440},1e3,"Linear",!0).onComplete.add(function(){e.game.state.start("game")})}catch(t){e.game.state.start("game")}}},h.prototype.addPhone=function(){m=this.add.image(325,400,"splash-phone")},h.prototype.addMessage=function(){c=this.add.image(25,260,"splash-message-box"),c.animations.add("shake"),c.animations.play("shake",30,!0),this.add.tween(c).to({x:50},150,Phaser.Easing.Quadratic.InOut,!0,0,1e3,!0)},h.prototype.addTitle=function(){u=this.add.image(175,0,"splash-text")},h.prototype.addYouDrunk=function(){this.add.image(300,230,"youdrunk")};const _=new Phaser.Game(s.x,s.y,Phaser.AUTO,"game"),b={boot:a,preloader:i,load:o,splash:h,game:e};Object.entries(b).forEach(([e,t])=>{_.state.add(e,t)}),_.state.start("boot");
