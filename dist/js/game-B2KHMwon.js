const e={};let t,o;const l={font:"bold 24px monospace",fill:"#ffff00",stroke:"#000000",strokeThickness:2},i={font:"bold 20px monospace",fill:"#ffffff",stroke:"#000000",strokeThickness:2},s={font:"bold 24px monospace",fill:"#00ff00",stroke:"#000000",strokeThickness:2},a={font:"bold 24px monospace",fill:"#ff6600",stroke:"#000000",strokeThickness:2},n={font:"bold 18px monospace",fill:"#ff00ff",stroke:"#000000",strokeThickness:2,boundsAlignH:"center",boundsAlignV:"middle"};let d,r,c,u,y,f,h,p,b,m,v,g,x,k,A,E,B,S,R,M,P,I,O,T,w,C,K,F,W,D,V,H,G,N,U=!1,X=5,Y=0,$=0,L=1,j=0,q="Drunkness x Time",z=-200,J=1.5,Q=-425,Z=3e3,_=3e3,ee=!1,te=0,oe=1,le=!1,ie=0;function se(){!1!==o.alive&&(T.x=o.x,T.y=o.y,T.start(!0,1e3,null,15),e.time.timeScale=.3,e.time.events.add(1e3,function(){e.time.timeScale=1},this),o.alive=!1,e.time.events.remove(this.timer),b.forEachAlive(function(e){e.body.velocity.x=0},this),t.tilePosition.x=0,r.tilePosition.x=0,_=Z,X=10,P.destroy())}function ae(){var e=b.getFirstExists(!1);e.reset(1023,467),e.body.velocity.x=z/2,e.body.immovable=!0}function ne(){var t=M.getFirstExists(!1);t.reset(1023,e.rnd.integerInRange(50,500)),t.body.velocity.x=-200,t.body.immovable=!0}function de(){var t=R.getFirstExists(!1);t.reset(1023,e.rnd.integerInRange(50,500)),t.body.velocity.x=-200,t.body.immovable=!0}function re(){var e=h.getFirstExists(!1);e.reset(1023,630),e.body.velocity.x=z,e.body.immovable=!0}function ce(){var e=p.getFirstExists(!1);e.reset(1023,630),e.body.velocity.x=z,e.body.immovable=!0}function ue(){var e=m.getFirstExists(!1);e.reset(1023,376),e.body.velocity.x=z/2,e.body.immovable=!0}function ye(){var e=g.getFirstExists(!1);e.reset(1023,426),e.body.velocity.x=z/2,e.body.immovable=!0}function fe(){var e=v.getFirstExists(!1);e.reset(1023,156),e.body.velocity.x=z,e.body.immovable=!0}function he(){var t=u.getFirstExists(!1);t.reset(1023,e.rnd.integerInRange(0,475)),t.body.velocity.x=Q,t.body.immovable=!0}function pe(){var t=y.getFirstExists(!1);t.reset(1023,e.rnd.integerInRange(0,475)),t.body.velocity.x=Q,t.body.immovable=!0}function be(){var t=f.getFirstExists(!1);t.reset(1023,e.rnd.integerInRange(0,500)),t.body.velocity.x=Q,t.body.immovable=!0}function me(e,t){t.kill(),I.x=t.x,I.y=t.y,I.start(!0,800,null,8),xe(1),ge()}function ve(e,t){t.kill(),I.x=t.x,I.y=t.y,I.start(!0,800,null,12),xe(3),ge()}function ge(){j++,L=Math.min(Math.floor(j/3)+1,5),j%10==0&&j>0&&Ee(`COMBO x${L}!`),Math.floor($/10)%100==0&&Math.floor($/10)>0&&Ee(`${Math.floor($/10)}m REACHED!`),Y%30==0&&Y>0&&Ee(`${Y}s SURVIVED!`),e.time.events.remove(S),S=e.time.events.add(5e3,Ae,null,e)}function xe(e){X>10||(X+=e,_+=100*e,o.body.gravity.y=_,x.text=X)}function ke(){0===X&&(X=0),X>0&&(X--,_-=100,o.body.gravity.y=_,x.text=X)}function Ae(){j=0,L=1}function Ee(t){B.text=t,B.visible=!0,B.alpha=1,e.add.tween(B).to({alpha:0},2e3,Phaser.Easing.Linear.None,!0).onComplete.add(()=>{B.visible=!1})}function Be(e,t){!ee&&e.body.velocity.y>0&&function(){ee=!0,o.animations.play("roll",8,!0),te=.3*Math.abs(o.body.velocity.x),te<50&&(te=50);oe=o.body.velocity.x>0?1:-1,o.body.velocity.y=0,o.body.gravity.y=0,w.x=o.x,w.y=r.y-20,w.start(!0,800,null,15)}()}function Se(){ee=!1,o.animations.play("fly",2,!0),o.body.gravity.y=_,o.angle=0,te=0}function Re(){ee&&Se(),o.body.velocity.y=-500,e.add.tween(o).to({angle:-40},100).start(),O.x=o.x,O.y=o.y+20,O.start(!0,600,null,5)}e.create=function(){e.time.reset(),P=e.add.audio("music"),P.play(),t=this.starfield=e.add.tileSprite(0,0,1024,768,"starfield"),m=e.add.group(),m.enableBody=!0,m.createMultiple(25,"tree"),m.setAll("outOfBoundsKill",!0),m.setAll("checkWorldBounds",!0),b=e.add.group(),b.enableBody=!0,b.createMultiple(25,"lamp"),b.setAll("outOfBoundsKill",!0),b.setAll("checkWorldBounds",!0),g=e.add.group(),g.enableBody=!0,g.createMultiple(25,"shop2"),g.setAll("outOfBoundsKill",!0),g.setAll("checkWorldBounds",!0),v=e.add.group(),v.enableBody=!0,v.createMultiple(25,"shop1"),v.setAll("outOfBoundsKill",!0),v.setAll("checkWorldBounds",!0),u=e.add.group(),u.enableBody=!0,u.createMultiple(25,"cloud1"),u.setAll("outOfBoundsKill",!0),u.setAll("checkWorldBounds",!0),y=e.add.group(),y.enableBody=!0,y.createMultiple(25,"cloud2"),y.setAll("outOfBoundsKill",!0),y.setAll("checkWorldBounds",!0),f=e.add.group(),f.enableBody=!0,f.createMultiple(25,"cloud3"),f.setAll("outOfBoundsKill",!0),f.setAll("checkWorldBounds",!0),o=this.player=this.game.add.sprite(200,300,"ship"),o.animations.add("fly"),o.animations.play("fly",2,!0),o.animations.add("roll",[0,1],8,!0),e.physics.enable(o,Phaser.Physics.ARCADE),o.anchor.setTo(.5,.5),o.body.gravity.y=_,e.input.keyboard.createCursorKeys(),d=e.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),e.input.onDown.add(Re,o),M=e.add.group(),M.enableBody=!0,M.createMultiple(100,"smallSake"),M.setAll("outOfBoundsKill",!0),M.setAll("checkWorldBounds",!0),R=e.add.group(),R.enableBody=!0,R.createMultiple(100,"largeSake"),R.setAll("outOfBoundsKill",!0),R.setAll("checkWorldBounds",!0),h=e.add.group(),h.enableBody=!0,h.createMultiple(25,"rock1"),h.setAll("outOfBoundsKill",!0),h.setAll("checkWorldBounds",!0),p=e.add.group(),p.enableBody=!0,p.createMultiple(25,"rock2"),p.setAll("outOfBoundsKill",!0),p.setAll("checkWorldBounds",!0),this.createUI(),this.createParticleSystems(),this.createVisualEffects(),this.timer=e.time.events.loop(3e3,ke,null,this),r=this.ground=e.add.tileSprite(0,656,1024,115,"ground"),r.physicsType=Phaser.SPRITE,e.physics.enable(r,Phaser.Physics.ARCADE),c=this.ground2=e.add.tileSprite(0,623,1024,150,"ground2"),e.physics.enable(c,Phaser.Physics.ARCADE),this.timer=e.time.events.loop(3500,function(){V[e.rnd.integerInRange(0,2)]()},null,this),this.timer=e.time.events.loop(5e3,function(){H[e.rnd.integerInRange(0,4)]()},null,this),this.timer=e.time.events.loop(e.rnd.integerInRange(3e3,7e3),function(){G[e.rnd.integerInRange(0,3)]()},null,this),this.timer=e.time.events.loop(e.rnd.integerInRange(1e3,17e3),ue,null,this),this.timer=e.time.events.loop(2e3,function(){N[e.rnd.integerInRange(0,3)]()},null,this)},e.createUI=function(){e.add.text(250,20,"HIGH SCORE:",i),e.add.text(415,20,q,l),e.add.text(20,20,"DRUNKNESS:",i),x=e.add.text(180,20,X,a),e.add.text(20,60,"TIME:",i),k=e.add.text(110,60,"0",s),e.add.text(20,100,"DISTANCE:",i),A=e.add.text(150,100,"0m",s),e.add.text(20,140,"COMBO:",i),E=e.add.text(120,140,"x1",l),B=e.add.text(512,100,"",n),B.anchor.set(.5),B.visible=!1,W=e.add.text(512,300,"GAME OVER",{font:"bold 48px monospace",fill:"#ff0000",stroke:"#000000",strokeThickness:4,boundsAlignH:"center",boundsAlignV:"middle"}),W.anchor.set(.5),W.visible=!1,D=e.add.text(512,400,"Press SPACEBAR to restart",{font:"bold 24px monospace",fill:"#ffffff",stroke:"#000000",strokeThickness:2,boundsAlignH:"center",boundsAlignV:"middle"}),D.anchor.set(.5),D.visible=!1},e.createParticleSystems=function(){I=e.add.emitter(0,0,20),I.makeParticles("smallSake",0,20,!1,!0),I.setXSpeed(-100,100),I.setYSpeed(-150,-50),I.setRotation(0,360),I.setAlpha(1,0,800),I.setScale(.3,.1,.3,.1,800),O=e.add.emitter(0,0,15),O.makeParticles("smallSake",0,15,!1,!0),O.setXSpeed(-50,50),O.setYSpeed(-20,20),O.setRotation(0,360),O.setAlpha(.6,0,600),O.setScale(.2,.05,.2,.05,600),O.forEach(function(e){e.tint=8947848}),T=e.add.emitter(0,0,25),T.makeParticles("smallSake",0,25,!1,!0),T.setXSpeed(-200,200),T.setYSpeed(-200,200),T.setRotation(0,360),T.setAlpha(1,0,1e3),T.setScale(.4,.1,.4,.1,1e3),T.forEach(function(e){e.tint=16711680}),w=e.add.emitter(0,0,30),w.makeParticles("smallSake",0,30,!1,!0),w.setXSpeed(-80,80),w.setYSpeed(-30,10),w.setRotation(0,360),w.setAlpha(.8,0,1200),w.setScale(.3,.05,.3,.05,1200),w.forEach(function(e){e.tint=9127187})},e.createVisualEffects=function(){C=e.add.graphics(),C.beginFill(16711680,0),C.drawRect(0,0,1024,768),C.endFill(),C.fixedToCamera=!0,K=e.add.group();for(let t=0;t<10;t++){let t=e.add.graphics();t.lineStyle(2,16777215,.5),t.moveTo(0,0),t.lineTo(-50,0),K.add(t)}F=e.add.graphics()},e.updateVisualEffects=function(){Math.abs(o.body.velocity.x)>100||Math.abs(o.body.velocity.y)>100?K.forEach(function(t){t.x=e.rnd.integerInRange(0,1024),t.y=e.rnd.integerInRange(0,768),t.alpha=.5}):K.forEach(function(e){e.alpha=0}),F.clear(),F.lineStyle(3,16777215,.3),F.moveTo(o.x-20,o.y),F.lineTo(o.x-40,o.y)},e.update=function(){if(X>=10&&(U=!0),this.updateVisualEffects(),!1!==o.alive||le||(le=!0,ie=e.time.now,W.visible=!0,D.visible=!0,W.alpha=0,e.add.tween(W).to({alpha:1},500,Phaser.Easing.Linear.None,!0),e.add.tween(D).to({alpha:.3},800,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0)),le&&d.isDown){e.time.now-ie>=2e3&&(W.visible=!1,D.visible=!1,le=!1,function(){const e=X*Y,t=10*Math.floor($/10),o=e+t+j*L*5;(parseInt(q)<o||"number"!=typeof q)&&(q=o,Ee("NEW HIGH SCORE!"))}(),U=!1,X=5,e.time.reset(),e.state.start("game"))}!0===U&&(J=10,z=-2e3,Q=-850,_=5e3),!1===U&&(J=1.5,z=-200,Q=-550,Z=3e3),e.physics.arcade.collide(o,r,Be,null,this),r.tilePosition.x-=2,e.physics.arcade.enableBody(r),r.body.allowGravity=!1,r.body.checkCollision=!0,r.body.allowGravity=!1,r.body.immovable=!0,r.body.moves=!1,c.tilePosition.x-=2,e.physics.arcade.enableBody(c),c.body.allowGravity=!1,c.body.allowGravity=!1,c.body.moves=!1,t.tilePosition.x-=J,o.body.collideWorldBounds=!0,ee?function(){o.body.velocity.x=te*oe,te*=.98,o.angle+=10*oe,e.time.now%3==0&&(w.x=o.x,w.y=r.y-20,w.start(!0,400,null,3));te<10&&Se()}():o.angle<90&&(o.angle+=2.5),(d.isDown||e.input.activePointer.isDown)&&Re(),o.body.y>500&&(o.angle+=.9),e.physics.arcade.overlap(o,u,se,null,this),e.physics.arcade.overlap(o,y,se,null,this),e.physics.arcade.overlap(o,f,se,null,this),e.physics.arcade.overlap(o,h,se,null,this),e.physics.arcade.overlap(o,p,se,null,this),e.physics.arcade.overlap(o,M,me,null,this),e.physics.arcade.overlap(o,R,ve,null,this),k.text=Math.floor(this.game.time.totalElapsedSeconds()),Y=Math.floor(this.game.time.totalElapsedSeconds()),$+=2,A.text=Math.floor($/10)+"m",E.text="x"+L},V=[he,pe,be],H=[he,pe,be,re,ce],G=[ae,ue,fe,ye],N=[de,ne,ne,ne];export{e as g};
